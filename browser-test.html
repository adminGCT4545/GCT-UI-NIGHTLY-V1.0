<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Control Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .output {
            margin-top: 10px;
            padding: 10px;
            background: #1a1a1a;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }
        h2 {
            color: #3b82f6;
        }
    </style>
</head>
<body>
    <h1>Browser Control Integration Test</h1>
    
    <div class="test-section">
        <h2>Natural Language Parser Test</h2>
        <button class="test-button" onclick="testParser('open google.com')">Test: "open google.com"</button>
        <button class="test-button" onclick="testParser('search for AI news')">Test: "search for AI news"</button>
        <button class="test-button" onclick="testParser('click the search button')">Test: "click the search button"</button>
        <button class="test-button" onclick="testParser('type hello world')">Test: "type hello world"</button>
        <button class="test-button" onclick="testParser('scroll down')">Test: "scroll down"</button>
        <button class="test-button" onclick="testParser('take a screenshot')">Test: "take a screenshot"</button>
        <div id="parser-output" class="output"></div>
    </div>
    
    <div class="test-section">
        <h2>Browser Command Test</h2>
        <button class="test-button" onclick="testBrowserCommand('navigate', 'https://google.com')">Navigate to Google</button>
        <button class="test-button" onclick="testBrowserCommand('search', 'artificial intelligence')">Search for AI</button>
        <button class="test-button" onclick="testBrowserCommand('screenshot')">Take Screenshot</button>
        <div id="command-output" class="output"></div>
    </div>
    
    <div class="test-section">
        <h2>Integration Status</h2>
        <div id="status-output" class="output">
            Checking integration status...
        </div>
    </div>

    <script src="browser-ai.js"></script>
    <script>
        // Check integration status
        function checkStatus() {
            const status = document.getElementById('status-output');
            const checks = [];
            
            // Check if BrowserAI is loaded
            checks.push(`BrowserAI loaded: ${typeof window.BrowserAI !== 'undefined' ? '✅' : '❌'}`);
            
            // Check if browser control UI is available
            checks.push(`BrowserControlUI available: ${typeof window.BrowserControlUI !== 'undefined' ? '✅' : '❌'}`);
            
            // Check if natural language parsing works
            if (window.BrowserAI) {
                const testResult = window.BrowserAI.parseNaturalLanguage('open google.com');
                checks.push(`Natural language parsing: ${testResult ? '✅' : '❌'}`);
            }
            
            status.innerHTML = checks.join('<br>');
        }
        
        // Test natural language parser
        function testParser(input) {
            const output = document.getElementById('parser-output');
            
            if (!window.BrowserAI) {
                output.innerHTML = 'Error: BrowserAI not loaded';
                return;
            }
            
            const result = window.BrowserAI.parseNaturalLanguage(input);
            output.innerHTML = `<strong>Input:</strong> "${input}"<br>` +
                             `<strong>Parsed:</strong><br>` +
                             `<pre>${JSON.stringify(result, null, 2)}</pre>`;
        }
        
        // Test browser command
        function testBrowserCommand(action, param) {
            const output = document.getElementById('command-output');
            
            if (!window.BrowserAI) {
                output.innerHTML = 'Error: BrowserAI not loaded';
                return;
            }
            
            let parsedAction;
            if (action === 'navigate') {
                parsedAction = {
                    action: 'navigate',
                    params: { url: param }
                };
            } else if (action === 'search') {
                parsedAction = window.BrowserAI.parseNaturalLanguage(`search for ${param}`);
            } else if (action === 'screenshot') {
                parsedAction = {
                    action: 'screenshot',
                    params: {}
                };
            }
            
            const command = window.BrowserAI.toBrowserCommand(parsedAction);
            output.innerHTML = `<strong>Action:</strong> ${action}<br>` +
                             `<strong>Browser Command:</strong><br>` +
                             `<pre>${JSON.stringify(command, null, 2)}</pre>`;
        }
        
        // Check status on load
        window.addEventListener('load', checkStatus);
    </script>
</body>
</html>